<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>TensorRTåŸºæœ¬æµç¨‹æ¦‚è§ˆ | Hexo</title>
  <meta name="keywords" content="">
  <meta name="description" content="TensorRTåŸºæœ¬æµç¨‹æ¦‚è§ˆ | Hexo">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="[TOC] 1ã€æ ¸å¿ƒAPI[C++ API](API Reference :: NVIDIA Deep Learning TensorRT Documentation) TensorRT C++ APIå…è®¸å¼€å‘è€…å¯¼å…¥ã€æ ¡å‡†ã€ç”Ÿæˆå’Œéƒ¨ç½²ç½‘ç»œã€‚ç½‘ç»œå¯ä»¥ç›´æ¥ä»ONNXå¯¼å…¥ï¼Œæˆ–è€…ç”¨C++å®ä¾‹åŒ–æ¯ä¸€ä¸ªå±‚æ„å»ºç½‘ç»œç»“æ„ï¼Œç„¶åå°†å‚æ•°å’Œæƒé‡ï¼ˆå‚¨å­˜åœ¨æ–‡ä»¶ä¸­ï¼‰è£…è½½åˆ°ç»“æ„ä¸­ã€‚ æ ¸å¿ƒAPIä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸€ä¸ªéƒ¨åˆ†ï¼Œè¿™äº›APIéƒ½">
<meta property="og:type" content="article">
<meta property="og:title" content="TensorRTåŸºæœ¬æµç¨‹æ¦‚è§ˆ">
<meta property="og:url" content="http://example.com/2024/02/27/tensorrt-plain/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="[TOC] 1ã€æ ¸å¿ƒAPI[C++ API](API Reference :: NVIDIA Deep Learning TensorRT Documentation) TensorRT C++ APIå…è®¸å¼€å‘è€…å¯¼å…¥ã€æ ¡å‡†ã€ç”Ÿæˆå’Œéƒ¨ç½²ç½‘ç»œã€‚ç½‘ç»œå¯ä»¥ç›´æ¥ä»ONNXå¯¼å…¥ï¼Œæˆ–è€…ç”¨C++å®ä¾‹åŒ–æ¯ä¸€ä¸ªå±‚æ„å»ºç½‘ç»œç»“æ„ï¼Œç„¶åå°†å‚æ•°å’Œæƒé‡ï¼ˆå‚¨å­˜åœ¨æ–‡ä»¶ä¸­ï¼‰è£…è½½åˆ°ç»“æ„ä¸­ã€‚ æ ¸å¿ƒAPIä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸€ä¸ªéƒ¨åˆ†ï¼Œè¿™äº›APIéƒ½">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2024/02/27/tensorrt-plain/fff949657417a8e05c29638a6c92f413.png">
<meta property="article:published_time" content="2024-02-27T14:15:16.000Z">
<meta property="article:modified_time" content="2024-02-28T08:24:06.326Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2024/02/27/tensorrt-plain/fff949657417a8e05c29638a6c92f413.png">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/github.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 7.1.1"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>John Doe</span>
</div>

<div class="icon">
    
        
    
        
            <a title="github"
               href="https://github.com/thgpddl"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <a title="csdn"
               href="https://blog.csdn.net/qq_40243750"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-csdn"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
            <a title="email"
               href="mailto:ishyj@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(5)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="å·¥å…·ä½¿ç”¨">
            
            å·¥å…·ä½¿ç”¨
            <small>(2)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="å¥‡æ·«æŠ€å·§">
            
            å¥‡æ·«æŠ€å·§
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="opencv">
            
            opencv
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="TensorRT">
            
            TensorRT
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
        <a 
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="5">
<input type="hidden" id="yelog_site_word_count" value="5.3k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        
        <a  class="All TensorRT "
           href="/2024/02/27/tensorrt-plain/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="TensorRTåŸºæœ¬æµç¨‹æ¦‚è§ˆ">TensorRTåŸºæœ¬æµç¨‹æ¦‚è§ˆ</span>
            <span class="post-date" title="2024-02-27 22:15:16">2024/02/27</span>
        </a>
        
        
        <a  class="All opencv "
           href="/2024/02/26/opencv-createTrackbar/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="opencvä½¿ç”¨createTrackbarå®æ—¶è°ƒèŠ‚å‚æ•°è¿›è¡Œå¯è§†åŒ–">opencvä½¿ç”¨createTrackbarå®æ—¶è°ƒèŠ‚å‚æ•°è¿›è¡Œå¯è§†åŒ–</span>
            <span class="post-date" title="2024-02-26 14:16:31">2024/02/26</span>
        </a>
        
        
        <a  class="All å·¥å…·ä½¿ç”¨ "
           href="/2024/02/23/nvidia-use-tips/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="nvidiaä½¿ç”¨è®°å½•">nvidiaä½¿ç”¨è®°å½•</span>
            <span class="post-date" title="2024-02-23 09:35:52">2024/02/23</span>
        </a>
        
        
        <a  class="All å·¥å…·ä½¿ç”¨ "
           href="/2024/02/23/ubuntu-use-tips/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ubuntuä½¿ç”¨tipsæ—¢å¸¸è§é—®é¢˜">ubuntuä½¿ç”¨tipsæ—¢å¸¸è§é—®é¢˜</span>
            <span class="post-date" title="2024-02-23 08:26:48">2024/02/23</span>
        </a>
        
        
        <a  class="All å¥‡æ·«æŠ€å·§ "
           href="/2024/02/21/github_hexo/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ä½¿ç”¨github+hexoæ­å»ºé™æ€åšå®¢">ä½¿ç”¨github+hexoæ­å»ºé™æ€åšå®¢</span>
            <span class="post-date" title="2024-02-21 17:21:45">2024/02/21</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-tensorrt-plain" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">TensorRTåŸºæœ¬æµç¨‹æ¦‚è§ˆ</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="TensorRT">TensorRT</a>
            
        </span>
        
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2024-02-28 16:24:06'>2024-02-27 22:15</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:2.3k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="è·³è½¬è‡³è¯„è®ºåŒº">
            <a href="#comments">
                Comment:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E3%80%81%E6%A0%B8%E5%BF%83API"><span class="toc-text">1ã€æ ¸å¿ƒAPI</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E3%80%81TensorRT%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B"><span class="toc-text">2ã€TensorRTæµç¨‹å®ä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E3%80%81%E6%9E%84%E5%BB%BAengine%E6%96%87%E4%BB%B6"><span class="toc-text">2.1ã€æ„å»ºengineæ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1%E3%80%81%E5%88%9B%E5%BB%BA%E6%9E%84%E5%BB%BA%E5%99%A8"><span class="toc-text">2.1.1ã€åˆ›å»ºæ„å»ºå™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2%E3%80%81%E7%94%A8%E6%9E%84%E5%BB%BA%E5%99%A8%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E5%AE%9A%E4%B9%89"><span class="toc-text">2.1.2ã€ç”¨æ„å»ºå™¨åˆ›å»ºä¸€ä¸ªç½‘ç»œå®šä¹‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3%E3%80%81%E4%BD%BF%E7%94%A8ONNX-Parser%E5%90%91%E7%BD%91%E7%BB%9C%E5%AE%9A%E4%B9%89%E4%B8%AD%E8%BF%81%E7%A7%BB%E7%BB%93%E6%9E%84%E5%92%8C%E5%8F%82%E6%95%B0"><span class="toc-text">2.1.3ã€ä½¿ç”¨ONNX Parserå‘ç½‘ç»œå®šä¹‰ä¸­è¿ç§»ç»“æ„å’Œå‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4%E3%80%81%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AAengine%E6%96%87%E4%BB%B6"><span class="toc-text">2.1.4ã€æ„å»ºä¸€ä¸ªengineæ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-5%E3%80%81%E4%BF%9D%E5%AD%98%E5%BA%8F%E5%88%97%E5%8C%96engine%E6%96%87%E4%BB%B6"><span class="toc-text">2.1.5ã€ä¿å­˜åºåˆ—åŒ–engineæ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E3%80%81%E4%BD%BF%E7%94%A8engine%E6%89%A7%E8%A1%8C%E6%8E%A8%E7%90%86"><span class="toc-text">2.2ã€ä½¿ç”¨engineæ‰§è¡Œæ¨ç†</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><div class='inner-toc'><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E3%80%81%E6%A0%B8%E5%BF%83API"><span class="toc-text">1ã€æ ¸å¿ƒAPI</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E3%80%81TensorRT%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B"><span class="toc-text">2ã€TensorRTæµç¨‹å®ä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E3%80%81%E6%9E%84%E5%BB%BAengine%E6%96%87%E4%BB%B6"><span class="toc-text">2.1ã€æ„å»ºengineæ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1%E3%80%81%E5%88%9B%E5%BB%BA%E6%9E%84%E5%BB%BA%E5%99%A8"><span class="toc-text">2.1.1ã€åˆ›å»ºæ„å»ºå™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2%E3%80%81%E7%94%A8%E6%9E%84%E5%BB%BA%E5%99%A8%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E5%AE%9A%E4%B9%89"><span class="toc-text">2.1.2ã€ç”¨æ„å»ºå™¨åˆ›å»ºä¸€ä¸ªç½‘ç»œå®šä¹‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3%E3%80%81%E4%BD%BF%E7%94%A8ONNX-Parser%E5%90%91%E7%BD%91%E7%BB%9C%E5%AE%9A%E4%B9%89%E4%B8%AD%E8%BF%81%E7%A7%BB%E7%BB%93%E6%9E%84%E5%92%8C%E5%8F%82%E6%95%B0"><span class="toc-text">2.1.3ã€ä½¿ç”¨ONNX Parserå‘ç½‘ç»œå®šä¹‰ä¸­è¿ç§»ç»“æ„å’Œå‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4%E3%80%81%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AAengine%E6%96%87%E4%BB%B6"><span class="toc-text">2.1.4ã€æ„å»ºä¸€ä¸ªengineæ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-5%E3%80%81%E4%BF%9D%E5%AD%98%E5%BA%8F%E5%88%97%E5%8C%96engine%E6%96%87%E4%BB%B6"><span class="toc-text">2.1.5ã€ä¿å­˜åºåˆ—åŒ–engineæ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E3%80%81%E4%BD%BF%E7%94%A8engine%E6%89%A7%E8%A1%8C%E6%8E%A8%E7%90%86"><span class="toc-text">2.2ã€ä½¿ç”¨engineæ‰§è¡Œæ¨ç†</span></a></li></ol></li></ol></div></p>
<h1 id="1ã€æ ¸å¿ƒAPI"><a href="#1ã€æ ¸å¿ƒAPI" class="headerlink" title="1ã€æ ¸å¿ƒAPI"></a>1ã€æ ¸å¿ƒAPI</h1><p>[C++ API](<a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/api/index.html#api">API Reference :: NVIDIA Deep Learning TensorRT Documentation</a>)</p>
<p>TensorRT C++ APIå…è®¸å¼€å‘è€…å¯¼å…¥ã€æ ¡å‡†ã€ç”Ÿæˆå’Œéƒ¨ç½²ç½‘ç»œã€‚ç½‘ç»œå¯ä»¥ç›´æ¥ä»ONNXå¯¼å…¥ï¼Œæˆ–è€…ç”¨C++å®ä¾‹åŒ–æ¯ä¸€ä¸ªå±‚æ„å»ºç½‘ç»œç»“æ„ï¼Œç„¶åå°†å‚æ•°å’Œæƒé‡ï¼ˆå‚¨å­˜åœ¨æ–‡ä»¶ä¸­ï¼‰è£…è½½åˆ°ç»“æ„ä¸­ã€‚</p>
<p>æ ¸å¿ƒAPIä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸€ä¸ªéƒ¨åˆ†ï¼Œè¿™äº›APIéƒ½è¢«åŒ…å«åœ¨<code>NvInfer.h</code>å¤´æ–‡ä»¶ä¸­ï¼š</p>
<ul>
<li>æ„å»ºå™¨APIï¼ˆBuilder APIï¼‰ï¼š<a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/api/c_api/classnvinfer1_1_1_i_builder.html">TensorRT: nvinfer1::IBuilder Class Reference (nvidia.com)</a></li>
<li>æ‰§è¡ŒAPIï¼ˆExecution APIï¼‰ï¼š<a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/api/c_api/classnvinfer1_1_1_i_execution_context.html">TensorRT: nvinfer1::IExecutionContext Class Reference (nvidia.com)</a></li>
<li>ç½‘ç»œå®šä¹‰APIï¼ˆNetwork Definition APIï¼‰ï¼š<a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/api/c_api/classnvinfer1_1_1_i_network_definition.html">TensorRT: nvinfer1::INetworkDefinition Class Reference (nvidia.com)</a></li>
<li>ONNXåˆ†æå™¨APIï¼ˆONNX parser APIï¼‰ï¼š<a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/c_api/namespacenvonnxparser.html">https://docs.nvidia.com/deeplearning/tensorrt/c_api/namespacenvonnxparser.html</a></li>
<li>æ’ä»¶APIï¼ˆPlugin APIï¼‰ï¼š<a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/api/c_api/classnvinfer1_1_1_i_plugin.html">https://docs.nvidia.com/deeplearning/tensorrt/api/c_api/classnvinfer1_1_1_i_plugin.html</a></li>
</ul>
<p>ï¼ˆå…³äºC++ APIåŠç¤ºä¾‹ä»£ç ç­‰æ›´å¤šä¿¡æ¯ï¼Œå‚è€ƒ<a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/developer-guide/index.html">Developer Guide :: NVIDIA Deep Learning TensorRT Documentation</a> ï¼‰</p>
<h1 id="2ã€TensorRTæµç¨‹å®ä¾‹"><a href="#2ã€TensorRTæµç¨‹å®ä¾‹" class="headerlink" title="2ã€TensorRTæµç¨‹å®ä¾‹"></a>2ã€TensorRTæµç¨‹å®ä¾‹</h1><p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªonnxæ¨¡å‹æ–‡ä»¶ï¼ˆpytorchã€tensorflowç­‰éƒ½æä¾›äº†è½¬onnxçš„å·¥å…·ï¼‰ï¼Œå¦‚ä½•ä½¿ç”¨TensorRTè¿›è¡Œæ¨ç†åŠ é€Ÿå‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“è¯¥è¿‡ç¨‹å¤§ä½“ä¸Šåˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<img src="/2024/02/27/tensorrt-plain/fff949657417a8e05c29638a6c92f413.png" class="" title="fff949657417a8e05c29638a6c92f413">

<ul>
<li>æ„å»ºengineæ–‡ä»¶ï¼ˆå³NEURAL ETWORKåˆ°PLANè¿™éƒ¨åˆ†ï¼‰ã€‚TensorRTï¼ˆTRTï¼‰èƒ½è¿›è¡Œæ¨ç†åŠ é€Ÿçš„åŸå› ä¹‹ä¸€æ—¶å°†æ¨¡å‹é’ˆå¯¹å…·ä½“çš„ç¡¬ä»¶è¿›è¡Œäº†ä¼˜åŒ–æ„å»ºçš„ï¼Œæ‰€ä»¥TRTé¦–å…ˆéœ€è¦å°†ONNXè½¬ä¸ºå¯åœ¨GPUä¸Šé«˜æ•ˆæ‰§è¡Œçš„æ ¼å¼ï¼Œå¹¶ä¸”åœ¨æ­¤è¿‡ç¨‹ä¸­è¿›è¡Œä¼˜åŒ–ã€‚è¿™ä¸ªè¿‡ç¨‹çš„æœ€ç»ˆç»“æ„å°±æ˜¯å¾—åˆ°ä¸€ä¸ªengineæ ¼å¼çš„åºåˆ—åŒ–æ–‡ä»¶ã€‚ä½†æ˜¯è¿™ä¸ªè½¬æ¢è¿‡ç¨‹æ¯”è¾ƒè€—æ—¶ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ¯æ¬¡å¯åŠ¨éƒ½éœ€è¦é•¿æ—¶é—´ç­‰å¾…å®ƒè½¬æ¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†è½¬æ¢çš„ç»“æœä»¥äºŒè¿›åˆ¶æ–¹å¼ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œé€šå¸¸æ˜¯ä»¥<code>.engine</code>ç»“å°¾çš„æ–‡ä»¶ã€‚</li>
<li>ä½¿ç”¨engineè¿›è¡Œæ¨ç†ï¼ˆå³ä»PLANåˆ° Validate using TensorRTè¿™éƒ¨åˆ†ï¼‰ã€‚å¯åŠ¨æ—¶ç›´æ¥ä»æœ¬åœ°æ–‡ä»¶è¯»å–äºŒè¿›åˆ¶çš„engineæ–‡ä»¶ï¼Œå†ååºåˆ—åŒ–å°±å¯ä»¥è¿›è¡Œç›¸å…³çš„æ¨ç†ä»»åŠ¡ã€‚</li>
</ul>
<p>ä¸‹é¢å°†åˆ†åˆ«è®²è§£ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå†…å®¹åŸºæœ¬æ¥è‡ª<a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/developer-guide/index.html#c_topics">The C++ API</a></p>
<h2 id="2-1ã€æ„å»ºengineæ–‡ä»¶"><a href="#2-1ã€æ„å»ºengineæ–‡ä»¶" class="headerlink" title="2.1ã€æ„å»ºengineæ–‡ä»¶"></a>2.1ã€æ„å»ºengineæ–‡ä»¶</h2><p>C++ APIåœ¨å¤´æ–‡ä»¶<code>NvInfer.h</code>ä¸­ï¼Œå¹¶ä¸”åœ¨<code>nvinfer1</code>å‘½åç©ºé—´ä¸­ï¼Œæ‰€ä»¥å½“ä½¿ç”¨C++çš„TensorRTæ—¶ï¼Œæœ‰å¦‚ä¸‹å¼€å¤´ï¼š</p>
<pre><code class="cpp">#include &quot;NvInfer.h&quot;

using namespace nvinfer1;
</code></pre>
<p>TensorRTçš„APIä¸­ï¼Œæ¥å£ç±»æ˜¯ä»¥<code>I</code>ä¸ºå‰ç¼€çš„ï¼Œæ¯”å¦‚<code>ILogger</code>ï¼Œ<code>IBuilder</code>ç­‰ç­‰ã€‚</p>
<p><font color=red>å¦‚æœåœ¨ TensorRT é¦–æ¬¡è°ƒç”¨ CUDA ä¹‹å‰æ²¡æœ‰ CUDA  contextï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»º CUDA contextã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ€å¥½åœ¨é¦–æ¬¡è°ƒç”¨ TensorRT ä¹‹å‰æ‰‹åŠ¨åˆ›å»ºå’Œé…ç½® CUDA contextã€‚</font></p>
<h3 id="2-1-1ã€åˆ›å»ºæ„å»ºå™¨"><a href="#2-1-1ã€åˆ›å»ºæ„å»ºå™¨" class="headerlink" title="2.1.1ã€åˆ›å»ºæ„å»ºå™¨"></a>2.1.1ã€åˆ›å»ºæ„å»ºå™¨</h3><p>æ„å»ºå™¨é¡¾åæ€ä¹‰ç”¨æ¥æ„å»ºçš„ï¼Œæ¯”å¦‚ä»æ„å»ºå™¨æ„å»ºç½‘ç»œå®šä¹‰</p>
<p>æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ„å»ºå™¨ï¼Œä½†åœ¨è¿™ä¹‹å‰å¿…é¡»è¦å®ä¾‹åŒ–ä¸€ä¸ª<code>ILogger</code>æ¥å£ï¼ˆé€šè¿‡ç»§æ‰¿<code>ILogger</code>å¹¶å®ç°å…¶ä¸­çš„<code>log</code>å‡½æ•°ï¼‰ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ä¼šæ•è·æ‰€æœ‰è­¦å‘Šä¿¡æ¯ï¼Œä½†æ˜¯å¿½ç•¥informational messagesï¼ˆç³»ç»ŸçŠ¶æ€ã€æ“ä½œè¿›å±•æˆ–å…¶ä»–éé”™è¯¯æ€§äº‹ä»¶çš„ä¿¡æ¯ï¼‰ã€‚ç„¶ååœ¨å®ä¾‹åŒ–æ„å»ºå™¨æ—¶å°†<code>log</code>å¯¹è±¡ä¼ å…¥ã€‚å³åˆ›å»ºæ„å»ºå™¨å¿…é¡»è¦æœ‰<code>ILogger</code>å¯¹è±¡ï¼š</p>
<pre><code class="cpp">class Logger:pubilc ILogger&#123;
    void log(Severity severity, const char*msg) noexcept override&#123;
        // é˜»æ­¢info-levelçº§åˆ«ä¿¡æ¯
        if(severity&lt;=Severity::kWARNING)&#123;
            std::cout&lt;&lt;msg&lt;&lt;std::endl;
        &#125;
    &#125;
&#125; logger;

// åˆ›å»ºæ„å»ºå™¨
IBuilder* builder = createInferBuilder(logger);
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>severity</code>æŒ‡ç¤ºæ—¥å¿—æ¶ˆæ¯çš„ä¸¥é‡ç¨‹åº¦ï¼Œ<code>msg</code>æ˜¯æ—¥å¿—æ¶ˆæ¯çš„å†…å®¹ï¼Œ<code>noexcept</code>è¡¨ç¤ºè¯¥å‡½æ•°ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œ<code>override</code>è¡¨æ˜æ˜¯å¯¹åŒåå‡½æ•°çš„é‡å†™ã€‚</p>
<h3 id="2-1-2ã€ç”¨æ„å»ºå™¨åˆ›å»ºä¸€ä¸ªç½‘ç»œå®šä¹‰"><a href="#2-1-2ã€ç”¨æ„å»ºå™¨åˆ›å»ºä¸€ä¸ªç½‘ç»œå®šä¹‰" class="headerlink" title="2.1.2ã€ç”¨æ„å»ºå™¨åˆ›å»ºä¸€ä¸ªç½‘ç»œå®šä¹‰"></a>2.1.2ã€ç”¨æ„å»ºå™¨åˆ›å»ºä¸€ä¸ªç½‘ç»œå®šä¹‰</h3><p>åˆ›å»ºæ„å»ºå™¨åï¼Œç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºç½‘ç»œå®šä¹‰ï¼Œå¦‚ï¼š</p>
<pre><code class="cpp">uint32_t flag = 1U&lt;&lt;static_cast&lt;uint32_t&gt;(NetworkDefinitionCreateionFlag::KEXPLICIT_BATCH);

INetworkDefinition* network =builder-&gt;createNetworkV2(flag);
</code></pre>
<p>æˆ–è€…ï¼š</p>
<pre><code class="cpp">INetworkDefinition* network =builder-&gt;createNetworkV2(1U &lt;&lt;
        static_cast&lt;int&gt;(NetworkDefinitionCreationFlag::kEXPLICIT_BATCH));
</code></pre>
<p><font color=red>å¦‚æœè¦ä½¿ç”¨ONNX parserå¿…é¡»è¦ä½¿ç”¨kEXPLICIT_BATCHæ ‡å¿—ï¼Œè¯¦æƒ…è§ï¼š<a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/developer-guide/index.html#explicit-implicit-batch">6.9. Explicit Versus Implicit Batch</a></font></p>
<p><font color=red>åœ¨RTXä¸­ï¼Œæœ‰ä¸¤ä¸ªé˜¶æ®µï¼š1ï¼‰build engineï¼šå°†å‚¨å­˜äº†å±‚åå’Œæƒé‡çš„wtsæ–‡ä»¶è½¬æ¢ä¸ºengineæ–‡ä»¶ã€‚è¯¥è¿‡ç¨‹éœ€è¦IBuilderå’ŒINetworkï¼›2ï¼‰inferenceï¼šç›´æ¥å°†engineè¯»å–åˆ°IRuntimeä¸­ï¼Œè¿›è¡Œæ¨ç†ã€‚</font></p>
<p>æ­¤æ—¶çš„ç½‘ç»œå®šä¹‰åªæ˜¯ä¸€ä¸ªç©ºå£³ï¼Œæ²¡æœ‰ç»“æ„ä¹Ÿæ²¡æœ‰æƒé‡å‚æ•°ã€‚</p>
<h3 id="2-1-3ã€ä½¿ç”¨ONNX-Parserå‘ç½‘ç»œå®šä¹‰ä¸­è¿ç§»ç»“æ„å’Œå‚æ•°"><a href="#2-1-3ã€ä½¿ç”¨ONNX-Parserå‘ç½‘ç»œå®šä¹‰ä¸­è¿ç§»ç»“æ„å’Œå‚æ•°" class="headerlink" title="2.1.3ã€ä½¿ç”¨ONNX Parserå‘ç½‘ç»œå®šä¹‰ä¸­è¿ç§»ç»“æ„å’Œå‚æ•°"></a>2.1.3ã€ä½¿ç”¨ONNX Parserå‘ç½‘ç»œå®šä¹‰ä¸­è¿ç§»ç»“æ„å’Œå‚æ•°</h3><p>ONNXæ˜¯ä¸€ç§ä¸­é—´ä»¶è¡¨ç¤ºåè®®ï¼Œè§„å®šäº†ç½‘ç»œçš„ç»“æ„ä¸”å‚¨å­˜äº†å‚æ•°ã€‚ç°åœ¨å¯ä»¥ç”¨TensorRTçš„ONNX Parseræ¥å£å°†ONNXæ–‡ä»¶ä¸­çš„ç»“æ„å’Œå‚æ•°å¡«å……åˆ°ä¸Šæ–‡å®šä¹‰çš„ç©ºå£³ç½‘ç»œnetworkä¸­ã€‚</p>
<p>é¦–å…ˆONNX parserçš„APIä½äº<code>NvOnnxParser.h</code>å¤´æ–‡ä»¶ä¸­ï¼Œparserä½äº<code>nvonnxparser</code>å‘½åç©ºé—´ï¼š</p>
<pre><code class="cpp">#include &quot;NvOnnxParser.h&quot;

using namespace nvonnxparser;
</code></pre>
<p>è¦ä½¿ç”¨parserè¿›è¡Œå¡«å……ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªparserå®ä¾‹ï¼š</p>
<pre><code class="cpp">IParser* parser=createParser(*network,logger);
</code></pre>
<p>æ˜¾ç„¶ä»»ä½•éœ€è¦æ—¥å¿—çš„æ¥å£åœ¨å®ä¾‹åŒ–æ—¶éƒ½éœ€è¦ILoggerå¯¹è±¡ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬è¯»å–ONNXæ¨¡å‹æ–‡ä»¶å¹¶ä¸”å¤„ç†å‡ºç°çš„ä»»ä½•é”™è¯¯ï¼š</p>
<pre><code class="cpp">parser-&gt;parserFromFile(modelFile, static_cast&lt;int32_t&gt;(ILogger::Serverity::kWARNING));

for(int32_t i=0;i&lt;parser.getNbErrors();++i)&#123;
    std::cout&lt;&lt;parser-&gt;getError(i)-&gt;desc()&lt;&lt;std::endl;
&#125;
</code></pre>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å°è¯•è¯»å–æœ¬åœ°çš„ONNXæ–‡ä»¶ï¼ŒåŒæ—¶å®šä¹‰äº†éœ€è¦æ•è·çš„é”™è¯¯çš„ç­‰çº§ã€‚å‡½æ•°åœ¨è¯»å–æ–‡ä»¶å‘é€çš„æ‰€æœ‰å°äºè¯¥ç­‰çº§çš„é”™è¯¯éƒ½ä¼šè¢«è®°å½•ã€‚åç»­é€šè¿‡getNbErrorså’ŒgetErrorè·å–åˆ°é”™è¯¯çš„è¯¦ç»†æè¿°ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£æ¨¡å‹çš„è¯»å–æƒ…å†µã€‚</p>
<h3 id="2-1-4ã€æ„å»ºä¸€ä¸ªengineæ–‡ä»¶"><a href="#2-1-4ã€æ„å»ºä¸€ä¸ªengineæ–‡ä»¶" class="headerlink" title="2.1.4ã€æ„å»ºä¸€ä¸ªengineæ–‡ä»¶"></a>2.1.4ã€æ„å»ºä¸€ä¸ªengineæ–‡ä»¶</h3><p>TensorRTèƒ½å¤Ÿæœ‰æ•ˆåŠ é€Ÿçš„ä¸€ä¸ªåŸå› æ˜¯ï¼Œä¼šæ ¹æ®ç¡¬ä»¶çš„å…·ä½“æƒ…å†µï¼Œå°†ONNXç­‰å…¶ä»–æ¨¡å‹è¿›è¡Œæ„å»ºä¼˜åŒ–é€‚é…ã€‚ä½†æ˜¯æ¯ä¸€æ¬¡æ„å»ºéƒ½å¾ˆè€—æ—¶ï¼Œæ‰€ä»¥æ„å»ºå®Œæ¯•åé€šå¸¸éƒ½æ˜¯åºåˆ—åŒ–ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œæ–‡ä»¶ä»¥<code>.engine</code>ä¸ºåç¼€ã€‚ä¸‹ä¸€æ¬¡æ¨ç†åˆå§‹åŒ–æ—¶åªéœ€è¦ååºåˆ—åŒ–åŠ è½½engineæ–‡ä»¶å°±okäº†ï¼Œä¸éœ€è¦å†è¿›è¡Œè€—æ—¶çš„ä¼˜åŒ–ç¼–è¯‘äº†ã€‚</p>
<p>éœ€è¦è¯´æ˜çš„æ—¶ï¼Œengineæ˜¯TensorRTæ ¹æ®ä½ çš„ç¡¬ä»¶ã€CUDAåŠcuDNNé’ˆå¯¹æ€§çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æœ¬æœºæ„å»ºçš„engineæ–‡ä»¶åªèƒ½åœ¨æœ¬æœºä½¿ç”¨ã€‚å°±ç®—æ˜¯ä¸¤å°è½¯ç¡¬ä»¶ç›¸åŒçš„è®¾å¤‡ä¹Ÿæ— æ³•æ··ç”¨ï¼ˆæ²¡æœ‰å…·ä½“æµ‹è¯•è¿‡ï¼Œä½†æ˜¯ä¸¤å°ç›¸åŒGPUçš„è®¾å¤‡æµ‹è¯•è¿‡ç¡®å®ä¼šæŠ¥é”™ï¼‰ã€‚ç”šè‡³åŒä¸€ä¸ªè®¾å¤‡ä¸¤æ¬¡æ„å»ºengineä¹Ÿä¸ä¸€å®šç›¸åŒã€‚</p>
<p>åœ¨ä¸ŠèŠ‚ä¸­æˆ‘ä»¬è¯»å–äº†ONNXæ¨¡å‹æ–‡ä»¶ï¼Œç°åœ¨æˆ‘ä»¬å°è¯•å°†å…¶æ„å»ºä¸ºè®¾é…è®¾å¤‡çš„engineæ–‡ä»¶ã€‚</p>
<p>é¦–å…ˆåœ¨æ„å»ºæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨IBuilderConfigè®¾å®šä¸€äº›æ„å»ºä¼˜åŒ–çš„ç»†èŠ‚ï¼š</p>
<pre><code class="cpp">IBuilderCOnfig* config=builder-&gt;createBuilderConfig();

config-&gt;setMemoryPoolLimit(MemoryPoolType::kWORKSPACE, 1U&lt;20);
</code></pre>
<p><a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/api/c_api/classnvinfer1_1_1_i_builder_config.html">IBuilderConfig API</a></p>
<p>æœ€åå°±å¯ä»¥æ„å»ºengineäº†ï¼š</p>
<pre><code class="cpp">IHostMemory* serializedModel = builder-&gt;buildSerializedNetwork(*network, *config);
</code></pre>
<p>ç”±äºåºåˆ—åŒ–çš„engineåŒ…å«äº†åŒ…å«äº†å¿…éœ€çš„æƒé‡ï¼Œè€Œparserã€network definitionã€builder configå’Œbuilderä¸å†éœ€è¦äº†ï¼Œå› æ­¤å¯ä»¥å®‰å…¨åˆ é™¤ï¼š</p>
<pre><code class="cpp">delete parser;
delete network;
delete config;
delete builder;
</code></pre>
<h3 id="2-1-5ã€ä¿å­˜åºåˆ—åŒ–engineæ–‡ä»¶"><a href="#2-1-5ã€ä¿å­˜åºåˆ—åŒ–engineæ–‡ä»¶" class="headerlink" title="2.1.5ã€ä¿å­˜åºåˆ—åŒ–engineæ–‡ä»¶"></a>2.1.5ã€ä¿å­˜åºåˆ—åŒ–engineæ–‡ä»¶</h3><p>ä¸ŠèŠ‚ä¸­æˆ‘ä»¬æ„å»ºäº†åºåˆ—åŒ–çš„engineä¿å­˜åœ¨IHostMemoryä¸­ï¼Œæ„å»ºåºåˆ—åŒ–æ–‡ä»¶æ—¶å¾ˆè€—æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›ä¸‹æ¬¡å¯åŠ¨æ—¶è¿˜è¦åºåˆ—åŒ–ä¸€æ¬¡ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†engineä»¥æ–‡ä»¶çš„å½¢å¼ä¿å­˜åˆ°æœ¬åœ°ï¼ˆå·²ç»é’ˆå¯¹è®¾å¤‡ä¼˜åŒ–è¿‡çš„ç”¨äºTensorRTæ¨ç†ï¼Œå’ŒONNXæ–‡ä»¶ä¸åŒï¼‰ã€‚</p>
<p>ä¿å­˜è¿™éƒ¨åˆ†å®é™…ä¸Šå’ŒTensorRTæ²¡æœ‰ä»€ä¹ˆå…³ç³»äº†ï¼Œå°±æ˜¯å€ŸåŠ©C++çš„æ–‡ä»¶æ“ä½œè¿›è¡Œä¿å­˜ï¼š</p>
<pre><code class="cpp">// Serialize the engine
IHostMemory* serialized_engine = engine-&gt;serialize();
assert(serialized_engine != nullptr);

// Save engine to file
std::ofstream p(&quot;saved.engine&quot;, std::ios::binary);
if (!p) &#123;
std::cerr &lt;&lt; &quot;Could not open plan output file&quot; &lt;&lt; std::endl;
assert(false);
&#125;
p.write(reinterpret_cast&lt;const char*&gt;(serialized_engine-&gt;data()), serialized_engine-&gt;size());

delete serializedModel  // æœ€åå®‰å…¨åˆ é™¤
</code></pre>
<p>è¯»å–engineæ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ï¼Œå…¶ä¸­engineå’Œruntimeéœ€è¦åœ¨TensorRTæ¨ç†éƒ¨åˆ†ä»‹ç»ï¼š</p>
<pre><code class="cpp">std::ifstream file(engine_name, std::ios::binary);
if (!file.good()) &#123;
std::cerr &lt;&lt; &quot;read &quot; &lt;&lt; engine_name &lt;&lt; &quot; error!&quot; &lt;&lt; std::endl;
assert(false);
&#125;
size_t size = 0;
file.seekg(0, file.end);
size = file.tellg();
file.seekg(0, file.beg);
char* serialized_engine = new char[size];
assert(serialized_engine);
file.read(serialized_engine, size);
file.close();


IRuntime* runtime = createInferRuntime(logger);
ICudaEngine* engine = runtime-&gt;deserializeCudaEngine(serialized_engine, size);
</code></pre>
<h2 id="2-2ã€ä½¿ç”¨engineæ‰§è¡Œæ¨ç†"><a href="#2-2ã€ä½¿ç”¨engineæ‰§è¡Œæ¨ç†" class="headerlink" title="2.2ã€ä½¿ç”¨engineæ‰§è¡Œæ¨ç†"></a>2.2ã€ä½¿ç”¨engineæ‰§è¡Œæ¨ç†</h2><p>TODOï¼š<a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/tensorrt/developer-guide/index.html#perform-inference">3.3. Performing Inference</a></p>
<p>åœ¨æ¨ç†æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¿è¡Œç¯å¢ƒè¿›è¡Œç›¸å…³çš„æ§åˆ¶ã€‚æ‰€ä»¥å¿…é¡»å…ˆå®ä¾‹åŒ–ä¸€ä¸ª<code>Runtime</code>æ¥å£ï¼ŒåŒæ ·çš„å®ƒä¹Ÿéœ€è¦ä¸€ä¸ª<code>ILogger</code>ã€‚</p>
<pre><code class="cpp">IRuntime* runtime=createInferRuntime(logger);
</code></pre>
<p>é€šè¿‡<code>IRuntime</code>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªICudaEngineï¼ŒICudaEngineæœ‰ä¼˜åŒ–åçš„æ¨¡å‹ï¼Œä¿å­˜çš„æ˜¯ç½‘ç»œç»“æ„å’Œå‚æ•°ï¼Œæ‰€ä»¥åœ¨åˆ›å»ºæ—¶éœ€è¦ç»™å®šengineæ–‡ä»¶æ•°æ®åŠ è½½è¿›æ•°æ®è¿›è¡Œåˆ›å»ºï¼š</p>
<pre><code class="cpp">ICudaEngine* engine=runtime-&gt;deserializeCudaEngine(serialized_engine,size);
</code></pre>
<p>åœ¨æ¨ç†æ—¶ä¼šäº§ç”Ÿå¾ˆå¤šä¸­é—´å€¼ï¼Œè€ŒICudaEngineåªæ˜¯æŒæœ‰æ¨¡å‹æ•°æ®ï¼Œä¸å…·æœ‰ç®¡ç†ä¸­é—´å€¼å’Œè¿è¡ŒçŠ¶æ€çš„èƒ½åŠ›ï¼Œè€Œè¿™éƒ¨åˆ†çš„åŠŸèƒ½æ˜¯ç”±<code>IExecutionContext</code>çš„æ‰§è¡Œä¸Šä¸‹æ–‡å®ç°çš„ï¼š</p>
<pre><code class="cpp">IExecutionContext *context = engine-&gt;createExecutionContext();
</code></pre>
<p>ä¸ºäº†é«˜æ•ˆçš„æ•°æ®ä¼ é€’ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¨¡å‹çš„è¾“å…¥è¾“å‡ºèŠ‚ç‚¹ç»‘å®šä¸€ä¸ªbufferï¼Œæ¨ç†æ—¶è¾“å…¥ç›´æ¥ä»ç»‘å®šçš„è¾“å…¥bufferè¯»å–æ•°æ®ï¼Œè¾“å‡ºç»“æœä¹Ÿç›´æ¥ç»™ç»‘å®šçš„è¾“å‡ºbufferï¼Œæé«˜æ¨ç†æ•ˆç‡ï¼š</p>
<pre><code class="cpp">context-&gt;setTensorAddress(INPUT_NAME, inputBuffer);
context-&gt;SetTensorAddress(OUTPUT_NAME, outputBuffer);
</code></pre>
<p>å…¶ä¸­INPUT_NAMEå’ŒOUTPUT_NAMEæ˜¯æ¨¡å‹è¾“å…¥å’Œè¾“å‡ºèŠ‚ç‚¹çš„åå­—ï¼Œå³é€šè¿‡åå­—å®šä½åˆ°è¾“å…¥è¾“å‡ºèŠ‚ç‚¹ï¼Œç„¶åç»‘å®šbufferã€‚</p>
<p>åœ¨æ¨ç†ä¹‹å‰æˆ‘ä»¬éœ€è¦å°†è¾“å…¥æ•°æ®å¡«å……åˆ°inputBufferä¸­ï¼Œç„¶åè°ƒç”¨ TensorRT çš„ enqueueV3 æ–¹æ³•ï¼Œå¼€å§‹ä½¿ç”¨ CUDA æµè¿›è¡Œæ¨ç†ï¼šï¼š</p>
<pre><code class="cpp">context-&gt;enqueueV3(stream);
</code></pre>

      
       <hr><span style="font-style: italic;color: gray;"> è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ ishyj@qq.com </span>
    </div>
</article>





    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: 'feb1d3e8da252a070cc7',
            clientSecret: 'a0c910988191602d9a3612227eabac41f45652ed',
            repo: 'thgpddl.github.io',
            owner: 'thgpddl',
            admin: ['thgpddl'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('100',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2024-2024 ishyj
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    

    
    #post .pjax article :not(pre) > code {
        color: #24292e;
        font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
        background-color: rgba(27,31,35,.05);
        border-radius: 3px;
        font-size: 85%;
        margin: 0;
        padding: .2em .4em;
    }
    
</style>







</html>
